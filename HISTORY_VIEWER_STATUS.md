# üìã –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ TMC Warehouse

---

## üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ DocumentDialog (2025-12-01)

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è workflow DocumentDialog

#### 1. **–£–¥–∞–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å (OCR/–ò–ò)"
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å"
- ‚úÖ OCR –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞
- ‚úÖ –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å —Å—Ç–∞—Ä—Ç—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è OCR

#### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏**
- ‚úÖ –ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ "‚úì –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê" (–∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É

#### 3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥**
–î–µ—Ç–∞–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
- **–®–∞–≥ 1/4**: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏—ë–º–∫–∏ (0-20%)
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç: "‚úì –ü—Ä–∏—ë–º–∫–∞ #{id} —Å–æ–∑–¥–∞–Ω–∞"
- **–®–∞–≥ 2/4**: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (20-40%)
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –∏ —Å—Ç–∞—Ç—É—Å
- **–®–∞–≥ 3/4**: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (40-60%)
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ –≤ –ú–ë
- **–®–∞–≥ 4/4**: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è (60-95%)
  - –°—á—ë—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—è
- **100%**: "‚úì –ì–æ—Ç–æ–≤–æ!" —Å –ø–∞—É–∑–æ–π –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º

#### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ `except`
- –ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

#### 5. **–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ OCR: "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ù–∞—á–∞—Ç–∞ –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã."
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–µ–≤—å—é

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏
- `client/src/ui/document_dialog.py:807` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –Ω–µ–æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `all_verified`
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞ (–∫–Ω–æ–ø–∫–∏ recognize_btn, record_btn)

---

## üìã –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏—ë–º–æ–∫ - –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (FULL)

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—Ä–∏–∏** (`HistoryDialog`)
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –ø—Ä–∏—ë–º–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∏: ID, –¢–¢–ù, –î–∞—Ç–∞, –ü–æ—Å—Ç–∞–≤—â–∏–∫, –°—Ç–∞—Ç—É—Å
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel
- ‚úÖ **–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫** –Ω–∞ –ø—Ä–∏—ë–º–∫–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

### 2. **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏—ë–º–∫–∏** (`ReceptionDetailDialog`)

#### –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—ë–º–∫–µ
- ‚úÖ ID, –¢–¢–ù, –î–∞—Ç–∞, –ü–æ—Å—Ç–∞–≤—â–∏–∫
- ‚úÖ –°—Ç–∞—Ç—É—Å (—Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è)
- ‚úÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

#### –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ê—Ä—Ç–∏–∫—É–ª, –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –ö–æ–ª-–≤–æ, –ï–¥.–∏–∑–º., –¶–µ–Ω–∞
- ‚úÖ –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç—Ä–æ–ª—è (‚úì –ü—Ä–∏–Ω—è—Ç–æ / ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ)
- ‚úÖ –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–∞–≤—É—é –ø–∞–Ω–µ–ª—å

#### –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** - placeholder –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ API)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ"

#### –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: –ú–µ–¥–∏–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üé• –°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏—ë–º–∫–∏"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üìÑ –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –¢–¢–ù"

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (Backend + API)

### 1. **API –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–µ–¥–∏–∞**

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å endpoints –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

#### GET `/api/v1/receptions/{reception_id}/video`
–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏—ë–º–∫–∏

**Response**: Binary (–≤–∏–¥–µ–æ —Ñ–∞–π–ª .avi)

#### GET `/api/v1/receptions/{reception_id}/document`
–°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –¢–¢–ù (PDF/JPG)

**Response**: Binary (—Ñ–∞–π–ª)

#### GET `/api/v1/receptions/{reception_id}/items/{item_id}/photos/{photo_index}`
–°–∫–∞—á–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Ç–æ–≤–∞—Ä–∞

**Response**: Binary (JPG)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: 
```
GET /api/v1/receptions/{reception_id}/items/{item_id}/photos
```
–í–µ—Ä–Ω—É—Ç—å zip –∞—Ä—Ö–∏–≤ –≤—Å–µ—Ö —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞

---

### 2. **SyncService –º–µ—Ç–æ–¥—ã**

–î–æ–±–∞–≤–∏—Ç—å –≤ `client/src/services/sync_service.py`:

```python
def download_video(self, reception_id: int, save_path: Path) -> bool:
    """–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏—ë–º–∫–∏."""
    try:
        response = requests.get(
            f"{self.base_url}/receptions/{reception_id}/video",
            timeout=self.timeout * 10,  # –ë–æ–ª—å—à–æ–π timeout –¥–ª—è –≤–∏–¥–µ–æ
            stream=True
        )
        response.raise_for_status()
        
        with open(save_path, 'wb') as f:
            for chunk in response.iter_content(chunk_size=8192):
                f.write(chunk)
        return True
    except Exception as e:
        logger.error(f"Failed to download video: {e}")
        return False

def download_document(self, reception_id: int, save_path: Path) -> bool:
    """–°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –¢–¢–ù."""
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ download_video
    pass

def download_item_photos(self, reception_id: int, item_id: int, save_dir: Path) -> List[Path]:
    """–°–∫–∞—á–∞—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞."""
    # –°–∫–∞—á–∞—Ç—å zip –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
    pass
```

---

### 3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ UI**

–û–±–Ω–æ–≤–∏—Ç—å `ReceptionDetailDialog._display_photos()`:

```python
def _display_photos(self, photo_paths: list, item_id: int):
    """–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞."""
    # –°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ —Å —Å–µ—Ä–≤–µ—Ä–∞
    temp_dir = Path(tempfile.gettempdir()) / f"tmc_photos_{item_id}"
    temp_dir.mkdir(exist_ok=True)
    
    downloaded = self.sync_service.download_item_photos(
        self.reception_id, 
        item_id, 
        temp_dir
    )
    
    # –°–æ–∑–¥–∞—Ç—å –≥–∞–ª–µ—Ä–µ—é –∏–∑ QLabel —Å pixmap
    layout = QHBoxLayout()
    for photo_path in downloaded:
        pixmap = QPixmap(str(photo_path))
        if not pixmap.isNull():
            label = QLabel()
            # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –¥–æ 200x200, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏
            scaled = pixmap.scaled(
                200, 200, 
                Qt.KeepAspectRatio, 
                Qt.SmoothTransformation
            )
            label.setPixmap(scaled)
            label.setToolTip(str(photo_path))
            layout.addWidget(label)
    
    # –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π layout –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π
    self.photos_widget.setLayout(layout)
```

---

### 4. **Server API Routes**

–°–æ–∑–¥–∞—Ç—å `server/src/api/routes_media.py`:

```python
from fastapi import APIRouter, HTTPException
from fastapi.responses import FileResponse
from pathlib import Path

router = APIRouter(prefix="/receptions", tags=["media"])

@router.get("/{reception_id}/video")
async def download_video(reception_id: int):
    """–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏—ë–º–∫–∏."""
    # –ü–æ–ª—É—á–∏—Ç—å reception –∏–∑ –ë–î
    reception = ReceptionRepository().get(reception_id)
    if not reception or not reception.video_path:
        raise HTTPException(404, "Video not found")
    
    video_path = Path(reception.video_path)
    if not video_path.exists():
        raise HTTPException(404, "Video file not found on disk")
    
    return FileResponse(
        path=str(video_path),
        media_type="video/x-msvideo",
        filename=f"reception_{reception_id}_video.avi"
    )

@router.get("/{reception_id}/document")
async def download_document(reception_id: int):
    """–°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –¢–¢–ù."""
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ video
    pass

@router.get("/{reception_id}/items/{item_id}/photos")
async def download_item_photos(reception_id: int, item_id: int):
    """–°–∫–∞—á–∞—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ (ZIP)."""
    import zipfile
    import io
    
    # –ü–æ–ª—É—á–∏—Ç—å item –∏–∑ –ë–î
    item = ReceptionItemRepository().get(item_id)
    if not item or not item.photos:
        raise HTTPException(404, "Photos not found")
    
    # –°–æ–∑–¥–∞—Ç—å ZIP –≤ –ø–∞–º—è—Ç–∏
    zip_buffer = io.BytesIO()
    with zipfile.ZipFile(zip_buffer, 'w') as zip_file:
        photo_paths = json.loads(item.photos)
        for i, photo_path in enumerate(photo_paths):
            if Path(photo_path).exists():
                zip_file.write(
                    photo_path, 
                    arcname=f"photo_{i+1}.jpg"
                )
    
    zip_buffer.seek(0)
    return StreamingResponse(
        zip_buffer,
        media_type="application/zip",
        headers={
            "Content-Disposition": f"attachment; filename=photos_item_{item_id}.zip"
        }
    )
```

–î–æ–±–∞–≤–∏—Ç—å –≤ `server/src/main_server.py`:
```python
from server.src.api import routes_media
app.include_router(routes_media.router, prefix="/api/v1")
```

---

## üéØ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: Backend (—Å–µ—Ä–≤–µ—Ä)
1. –°–æ–∑–¥–∞—Ç—å `routes_media.py`
2. –î–æ–±–∞–≤–∏—Ç—å endpoints –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Postman/curl

### –®–∞–≥ 2: Frontend (–∫–ª–∏–µ–Ω—Ç)
1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `SyncService`
2. –û–±–Ω–æ–≤–∏—Ç—å `ReceptionDetailDialog`:
   - `_display_photos()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - `_download_photos()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫
   - `_download_video()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ
   - `_download_document()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏—ë–º–∫—É —Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
2. –û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ –ò—Å—Ç–æ—Ä–∏—é
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ in-app**
–î–æ–±–∞–≤–∏—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä –≤–º–µ—Å—Ç–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:
```python
from PySide6.QtMultimedia import QMediaPlayer
from PySide6.QtMultimediaWidgets import QVideoWidget
```

### 2. **–ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π**
Lightbox-—ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ –≤ –ø–æ–ª–Ω—ã–π —Ä–∞–∑–º–µ—Ä

### 3. **–§–∏–ª—å—Ç—Ä—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏**
- –ü–æ –¥–∞—Ç–µ
- –ü–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
- –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¢–¢–ù

### 4. **–ü–µ—á–∞—Ç—å/—ç–∫—Å–ø–æ—Ä—Ç**
- –ü–µ—á–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–π –ø—Ä–∏—ë–º–∫–∏ (PDF)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Word
- –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞–∫–ª–∞–¥–Ω–æ–π

---

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `client/src/ui/reception_detail_dialog.py`

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `client/src/ui/history_dialog.py` (+ double-click)

### –¢—Ä–µ–±—É—é—Ç —Å–æ–∑–¥–∞–Ω–∏—è:
- ‚è≥ `server/src/api/routes_media.py`
- ‚è≥ `server/src/repositories/reception_item_repository.py` (–µ—Å–ª–∏ –Ω–µ—Ç)

### –¢—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- ‚è≥ `client/src/services/sync_service.py` (+ download –º–µ—Ç–æ–¥—ã)
- ‚è≥ `server/src/main_server.py` (+ include router)

---

## üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –ò—Å—Ç–æ—Ä–∏—é
2. ‚úÖ –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –ø—Ä–∏—ë–º–∫–µ
3. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏—ë–º–∫–µ
4. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
5. ‚úÖ –ö–ª–∏–∫ –Ω–∞ —Ç–æ–≤–∞—Ä ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
6. ‚úÖ –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ")

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**
- ‚è≥ Backend API –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–µ–¥–∏–∞
- ‚è≥ SyncService –º–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚è≥ UI –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: ~2-3 —á–∞—Å–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üéâ –ò—Ç–æ–≥

**–°–∫–µ–ª–µ—Ç –≥–æ—Ç–æ–≤!** –í—Å—è UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ "–ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–æ–¥–∞" –∫ —Å–µ—Ä–≤–µ—Ä—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤.

–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø—Ä–æ–¥–æ–ª–∂–∏–ª –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —á–∞—Å—Ç–∏ (API + –∑–∞–≥—Ä—É–∑–∫—É)?
