# üîÑ DocumentDialog Workflow Refactoring

**–î–∞—Ç–∞:** 2025-12-01  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω workflow –¥–∏–∞–ª–æ–≥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏—ë–º–∫–∏ –¢–ú–¶. –£–¥–∞–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **–£–¥–∞–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

#### –î–æ:
- –ö–Ω–æ–ø–∫–∞ "–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å (OCR/–ò–ò)" - —Ç—Ä–µ–±–æ–≤–∞–ª–∞ —Ä—É—á–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å" - —Ç—Ä–µ–±–æ–≤–∞–ª–∞ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—å—é

#### –ü–æ—Å–ª–µ:
- ‚ùå –ö–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ OCR –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞
- ‚úÖ –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å —Å—Ç–∞—Ä—Ç—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ OCR

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `client/src/ui/document_dialog.py:56-77` - —É–¥–∞–ª—ë–Ω UI —ç–ª–µ–º–µ–Ω—Ç recognize_btn
- `client/src/ui/document_dialog.py:108-112` - —É–¥–∞–ª—ë–Ω UI —ç–ª–µ–º–µ–Ω—Ç record_btn
- `client/src/ui/document_dialog.py:317` - –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ `_run_ocr()`

---

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π workflow**

#### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:

1. **–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞** ‚Üí `_select_file()` (—Å—Ç—Ä–æ–∫–∞ 285)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤** `_run_ocr()`

2. **OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚Üí `_run_ocr()` (—Å—Ç—Ä–æ–∫–∞ 319)
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –¢–¢–ù
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ç–æ–≤–∞—Ä–æ–≤
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤** `_start_camera(auto_record=True)`

3. **–°—Ç–∞—Ä—Ç –∫–∞–º–µ—Ä—ã –∏ –∑–∞–ø–∏—Å–∏** ‚Üí `_start_camera()` (—Å—Ç—Ä–æ–∫–∞ 955)
   - –ó–∞–ø—É—Å–∫ –ø—Ä–µ–≤—å—é –∫–∞–º–µ—Ä—ã
   - –ó–∞–¥–µ—Ä–∂–∫–∞ 500–º—Å
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç –∑–∞–ø–∏—Å–∏** —á–µ—Ä–µ–∑ `_start_recording_internal()`

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤** (–≤—Ä—É—á–Ω—É—é)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–º—É

5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** ‚Üí `_mark_verified()` (—Å—Ç—Ä–æ–∫–∞ 754)
   - –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ç–æ–≤–∞—Ä–∞
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏**
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "‚úì –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê"

6. **–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** ‚Üí `_create_reception()` (—Å—Ç—Ä–æ–∫–∞ 361)
   - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

---

### 3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥**

#### –î–æ:
```python
progress = QProgressDialog("–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∫–∏...", "–û—Ç–º–µ–Ω–∞", 0, 100, self)
# –ü—Ä–æ—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π
progress.setLabelText("–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞...")
```

#### –ü–æ—Å–ª–µ:
```python
progress = QProgressDialog("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ...", None, 0, 100, self)
progress.setCancelButton(None)  # –û—Ç–∫–ª—é—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã

# –î–µ—Ç–∞–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º:
# –®–∞–≥ 1/4: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏—ë–º–∫–∏... (0-20%)
#   ‚úì –ü—Ä–∏—ë–º–∫–∞ #123 —Å–æ–∑–¥–∞–Ω–∞
# –®–∞–≥ 2/4: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (document.pdf)... (20-40%)
#   ‚úì –î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω
# –®–∞–≥ 3/4: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (15.3 –ú–ë)... (40-60%)
#   ‚úì –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
# –®–∞–≥ 4/4: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ 1... (60-90%)
# –®–∞–≥ 4/4: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è (5 –ø–æ–∑.)... (90-95%)
#   ‚úì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
# ‚úì –ì–æ—Ç–æ–≤–æ! (100%)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–º—è —Ñ–∞–π–ª–∞, —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ
- –ì–∞–ª–æ—á–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤
- –ù–µ–ª—å–∑—è –ø—Ä–µ—Ä–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞" –æ—Ç–∫–ª—é—á–µ–Ω–∞)

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** `client/src/ui/document_dialog.py:384-526`

---

### 4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏**

#### –õ–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:
```python
def _mark_verified(self, accepted: bool):
    # ... –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ ...
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
    all_verified = True
    for next_row, (next_uuid, _) in enumerate(items_with_uuids):
        if next_uuid not in self.verified_items or \
           self.verified_items[next_uuid].get('status') not in ('verified', 'rejected'):
            all_verified = False
            break
    
    # –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
    if all_verified and len(items_with_uuids) > 0:
        if self.camera_service.is_recording():
            self.camera_service.stop_recording()
            self.recording_indicator.setText("‚úì –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê")
            self.recording_indicator.setStyleSheet("background-color: #4CAF50; ...")
```

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–ø–∏—Å–∏:**
- üî¥ **"‚óè –ò–î–ï–¢ –ó–ê–ü–ò–°–¨"** (–∫—Ä–∞—Å–Ω—ã–π, –º–∏–≥–∞—é—â–∏–π) - –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- ‚úÖ **"‚úì –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê"** (–∑–µ–ª—ë–Ω—ã–π) - –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** `client/src/ui/document_dialog.py:799-821`

---

### 5. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

#### –î–æ:
```python
except Exception as e:
    logger.error(f"Error creating reception: {e}")
    ...
except Exception as e:  # –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!
    logger.exception(f"Exception during reception creation: {e}")
    ...
```

#### –ü–æ—Å–ª–µ:
```python
except Exception as e:
    progress.close()
    logger.exception(f"Exception during reception creation: {e}")
    QMessageBox.critical(self, "–û—à–∏–±–∫–∞", f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏—ë–º–∫–∏: {e}")
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ `except`
- –ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `logger.exception()` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥ –≤—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** `client/src/ui/document_dialog.py:512-515`

---

### 6. **–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ UI —Å–æ–æ–±—â–µ–Ω–∏—è**

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ OCR:
```python
QMessageBox.information(
    self, 
    "OCR", 
    "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ù–∞—á–∞—Ç–∞ –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—å.\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã."
)
```

#### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è PDF:
- **–î–æ:** "PDF –î–æ–∫—É–º–µ–Ω—Ç\n(–ù–∞–∂–º–∏—Ç–µ –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å)"
- **–ü–æ—Å–ª–µ:** "PDF –î–æ–∫—É–º–µ–Ω—Ç\n(–ó–∞–ø—É—Å–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è...)"

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** `client/src/ui/document_dialog.py:306, 309, 354`

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### 1. **–ù–µ–æ–±—ä—è–≤–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `all_verified`**
**–§–∞–π–ª:** `client/src/ui/document_dialog.py:807`

#### –î–æ:
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π
for next_row, (next_uuid, _) in enumerate(items_with_uuids):
    if next_uuid not in self.verified_items:
        self.results_widget.selectRow(next_row)
        return

# –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
if all_verified:  # ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞!
    ...
```

#### –ü–æ—Å–ª–µ:
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
all_verified = True  # ‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∞

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π
for next_row, (next_uuid, _) in enumerate(items_with_uuids):
    if next_uuid not in self.verified_items or \
       self.verified_items[next_uuid].get('status') not in ('verified', 'rejected'):
        self.results_widget.selectRow(next_row)
        all_verified = False  # ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
        return

if all_verified and len(items_with_uuids) > 0:
    ...
```

### 2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ except**
–£–¥–∞–ª—ë–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –±–ª–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ `_create_reception()`

### 3. **–ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ OCR**
**–î–æ:** –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ OCR  
**–ü–æ—Å–ª–µ:** –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –í–°–ï–• —Ç–æ–≤–∞—Ä–æ–≤

**–ò–∑–º–µ–Ω–µ–Ω–æ:** –£–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `self.create_btn.setEnabled(True)` –∏–∑ `_run_ocr()`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
client/src/ui/document_dialog.py    | 462 +++++++++++++++++---
HISTORY_VIEWER_STATUS.md            |  45 ++++++
```

### –£–¥–∞–ª—ë–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- –ú–µ—Ç–æ–¥ `_toggle_recording()` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
- UI —ç–ª–µ–º–µ–Ω—Ç—ã: `recognize_btn`, `record_btn`
- ~30 —Å—Ç—Ä–æ–∫ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥ (4 —ç—Ç–∞–ø–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤:
- **–î–æ:** 20 –º–µ—Ç–æ–¥–æ–≤
- **–ü–æ—Å–ª–µ:** 19 –º–µ—Ç–æ–¥–æ–≤ (—É–¥–∞–ª—ë–Ω `_toggle_recording`)

---

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Manual Verification Plan

#### 1. **–¢–µ—Å—Ç: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ OCR**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
2. –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –ø—Ä–∏—ë–º–∫–∏
3. –ù–∞–∂–∞—Ç—å "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª"
4. –í—ã–±—Ä–∞—Ç—å PDF/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ OCR –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–±–µ–∑ –∫–Ω–æ–ø–∫–∏ "–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å")
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫—É—Ä—Å–æ—Ä –æ–∂–∏–¥–∞–Ω–∏—è
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ù–∞—á–∞—Ç–∞ –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—å..."

#### 2. **–¢–µ—Å—Ç: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–ø–∏—Å–∏**
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è OCR:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–∞–º–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ß–µ—Ä–µ–∑ ~500–º—Å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "‚óè –ò–î–ï–¢ –ó–ê–ü–ò–°–¨" (–∫—Ä–∞—Å–Ω—ã–π, –º–∏–≥–∞—é—â–∏–π)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª" –æ—Ç–∫–ª—é—á–µ–Ω–∞

#### 3. **–¢–µ—Å—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤**
1. –í—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä –≤ —Ç–∞–±–ª–∏—Ü–µ
2. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–Ω—è—Ç—å" –∏–ª–∏ "–ù–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç—Ä–æ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "‚úì –ü—Ä–∏–Ω—è—Ç–æ" / "‚úó –û—Ç–∫–ª–æ–Ω–µ–Ω–æ"
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
- ‚úÖ –°—á—ë—Ç—á–∏–∫ "–û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å: N —Ç–æ–≤–∞—Ä(–æ–≤)" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

#### 4. **–¢–µ—Å—Ç: –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–æ–≤–∞—Ä:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "‚úì –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê" (–∑–µ–ª—ë–Ω—ã–π)
- ‚úÖ –ú–∏–≥–∞–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–í—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã! –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä."
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è (–∑–µ–ª—ë–Ω–∞—è)

#### 5. **–¢–µ—Å—Ç: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏**
–ù–∞–∂–∞—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä":

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥ –±–µ–∑ –∫–Ω–æ–ø–∫–∏ "–û—Ç–º–µ–Ω–∞"
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —ç—Ç–∞–ø—ã:
  - "–®–∞–≥ 1/4: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏—ë–º–∫–∏..." (0-20%)
  - "‚úì –ü—Ä–∏—ë–º–∫–∞ #N —Å–æ–∑–¥–∞–Ω–∞"
  - "–®–∞–≥ 2/4: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (filename.pdf)..." (20-40%)
  - "‚úì –î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω"
  - "–®–∞–≥ 3/4: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (X.X –ú–ë)..." (40-60%)
  - "‚úì –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ"
  - "–®–∞–≥ 4/4: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ N..." (60-90%)
  - "–®–∞–≥ 4/4: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è (N –ø–æ–∑.)..." (90-95%)
  - "‚úì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã"
  - "‚úì –ì–æ—Ç–æ–≤–æ!" (100%)
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–ª–∞–≤–Ω–æ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ –ß–µ—Ä–µ–∑ 500–º—Å –¥–∏–∞–ª–æ–≥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü—Ä–∏—ë–º–∫–∞ #N —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
- ‚úÖ –î–∏–∞–ª–æ–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

#### 6. **–¢–µ—Å—Ç: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
–û—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- ‚úÖ –î–∏–∞–ª–æ–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º
- ‚úÖ –ö–∞–º–µ—Ä–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

#### 7. **–¢–µ—Å—Ç: –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å"**
–ü–æ—Å–ª–µ OCR –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üîÑ –°–±—Ä–æ—Å":

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–∞–º–µ—Ä–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è
- ‚úÖ –û—á–∏—â–∞–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª" –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ù–æ–≤—ã–π —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π workflow:

1. **–ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¢–¢–ù (PDF/JPG)
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞—á–Ω—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è OCR (~5-10 —Å–µ–∫)

2. **–ü–æ—Å–ª–µ OCR:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –¢–¢–ù (–Ω–æ–º–µ—Ä, –¥–∞—Ç–∞, –ø–æ—Å—Ç–∞–≤—â–∏–∫)
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–º–µ—Ä—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≤–∏–¥–µ–æ—Ñ–∏–∫—Å–∞—Ü–∏—è)
   - –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –Ω–∞—á–Ω—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ç–æ–≤–∞—Ä –≤ —Ç–∞–±–ª–∏—Ü–µ
   - –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ
   - –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
   - –ù–∞–∂–º–∏—Ç–µ "‚úì –ü—Ä–∏–Ω—è—Ç—å" –∏–ª–∏ "‚úó –ù–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å"
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ç–æ–≤–∞—Ä

4. **–ö–æ–≥–¥–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã:**
   - –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" —Å—Ç–∞–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π (–∑–µ–ª—ë–Ω–æ–π)

5. **–ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä":**
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∑–∞–≥—Ä—É–∑–∫–∏
   - –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- ‚úÖ **–ú–µ–Ω—å—à–µ –∫–ª–∏–∫–æ–≤** - –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** - –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É, –Ω–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
- ‚úÖ **–ú–µ–Ω—å—à–µ –∫–æ–¥–∞** - —É–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –º–µ—Ç–æ–¥—ã –∏ UI —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞** - —á—ë—Ç–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –µ–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- ‚úÖ **–õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –º–µ–Ω—å—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `client/src/ui/document_dialog.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ API:
- `server/src/api/routes_files.py` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `server/src/api/routes_downloads.py` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- `server/src/api/routes_receptions.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏—ë–º–æ–∫ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
- `client/src/services/ocr_service.py` - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `client/src/services/camera_service.py` - –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—å (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `client/src/services/sync_service.py` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `HISTORY_VIEWER_STATUS.md` - –æ–±–Ω–æ–≤–ª—ë–Ω —Ä–∞–∑–¥–µ–ª —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- `DOCUMENT_DIALOG_REFACTORING.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] –£–¥–∞–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ `recognize_btn` –∏ `record_btn`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ OCR –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–ª–µ OCR
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- [x] –£–ª—É—á—à–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å-–¥–∏–∞–ª–æ–≥ —Å 4 –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —ç—Ç–∞–ø–∞–º–∏
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `all_verified`
- [x] –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ `except`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã UI —Å–æ–æ–±—â–µ–Ω–∏—è
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python (py_compile)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üöÄ –î–µ–ø–ª–æ–π

### –®–∞–≥–∏ –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)

2. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:**
   ```bash
   git pull origin master
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ./run_server.sh
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç:**
   ```bash
   source .venv/bin/activate
   python client/src/main_client.py
   ```

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–ª–µ–¥–æ–≤–∞—Ç—å –ø–ª–∞–Ω—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—à–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —ç—Ç–∞–ø—ã workflow

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `client.log` –∏ `server.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∫–∞–º–µ—Ä—ã (–¥–ª—è –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å–∏)
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Tesseract —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è OCR)

---

**–ê–≤—Ç–æ—Ä:** Claude Code  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-12-01
