name: Build Portable Windows

on:
  push:
    branches: [ master, main ]
    tags: [ 'v*.*.*' ]
  workflow_dispatch:  # ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ

env:
  PYTHON_VERSION: '3.12'
  TESSERACT_VERSION: '5.3.3'
  POPPLER_VERSION: '24.02.0'

jobs:
  build-portable:
    name: Build Portable Windows Package
    runs-on: windows-latest
    
    steps:
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 1. ĞŸĞĞ”Ğ“ĞĞ¢ĞĞ’ĞšĞ
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'

      - name: Get version
        id: version
        shell: powershell
        run: |
          if ("${{ github.ref }}" -match "refs/tags/v(.+)") {
            $version = $matches[1]
          } else {
            $sha = "${{ github.sha }}".Substring(0,7)
            $version = "dev-$sha"
          }
          echo "VERSION=$version" >> $env:GITHUB_OUTPUT
          echo "Building version: $version"

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 2. Ğ£Ğ¡Ğ¢ĞĞĞĞ’ĞšĞ Ğ—ĞĞ’Ğ˜Ğ¡Ğ˜ĞœĞĞ¡Ğ¢Ğ•Ğ™
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Install Python dependencies
        shell: powershell
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          pip install pyinstaller==6.3.0

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 3. Ğ¡ĞšĞĞ§Ğ˜Ğ’ĞĞĞ˜Ğ• TESSERACT (PORTABLE)
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Download Tesseract Portable
        shell: powershell
        run: |
          Write-Host "Downloading Tesseract ${{ env.TESSERACT_VERSION }}..."

          $installer = "tesseract-installer.exe"
          $tempDir = Join-Path $PWD "tesseract-temp"
          $destDir = Join-Path $PWD "portable\Tesseract-OCR"
          New-Item -ItemType Directory -Force -Path $destDir | Out-Null

          # Try multiple sources to avoid 403/Forbidden and HTML downloads
          $urls = @(
            "https://digi.bib.uni-mannheim.de/tesseract/tesseract-ocr-w64-setup-${{ env.TESSERACT_VERSION }}.20231005.exe",
            "https://sourceforge.net/projects/tesseract-ocr-alt/files/Setup%20-%20UB%20Mannheim/Tesseract-${{ env.TESSERACT_VERSION }}/tesseract-ocr-w64-setup-${{ env.TESSERACT_VERSION }}.20231005.exe/download"
          )

          $downloaded = $false
          foreach ($url in $urls) {
            try {
              Write-Host "Trying URL: $url"
              if (Test-Path $installer) { Remove-Item -Force $installer }
              # Use curl to follow redirects and fail on HTTP errors
              $curl = "curl.exe"
              & $curl -L --fail -o $installer $url
              if (Test-Path $installer) {
                $size = (Get-Item $installer).Length
                if ($size -gt 5000000) { # > ~5MB indicates likely valid binary
                  $downloaded = $true
                  break
                } else {
                  Write-Warning ("Downloaded file too small ({0} bytes) from {1}" -f $size, $url)
                }
              }
            } catch {
              Write-Warning ("Failed to download from {0}: {1}" -f $url, $_.Exception.Message)
            }
          }

          if ($downloaded) {
            try {
              # Prepare temp directory
              if (Test-Path $tempDir) { Remove-Item -Recurse -Force $tempDir }
              New-Item -ItemType Directory -Force -Path $tempDir | Out-Null

              # Silent install into a temp folder under the current workspace
              Start-Process -FilePath $installer -ArgumentList "/S", "/D=$tempDir" -Wait

              # Validate installer output (tesseract.exe should exist)
              $tempExe = Join-Path $tempDir "tesseract.exe"
              if (-not (Test-Path $tempExe)) { throw "Installer did not produce expected files in $tempDir" }

              Copy-Item -Path (Join-Path $tempDir '*') -Destination $destDir -Recurse -ErrorAction Stop
            } catch {
              Write-Warning ("Installer failed, falling back to Chocolatey: {0}" -f $_.Exception.Message)
              choco install tesseract -y
              $chocoPath = "C:\Program Files\Tesseract-OCR"
              if (-not (Test-Path $chocoPath)) { $chocoPath = "C:\Program Files (x86)\Tesseract-OCR" }
              if (-not (Test-Path $chocoPath)) { Write-Error "Tesseract not found after Chocolatey install"; exit 1 }
              Copy-Item -Path (Join-Path $chocoPath '*') -Destination $destDir -Recurse -ErrorAction Stop
            }
          } else {
            Write-Warning "Falling back to Chocolatey installation of Tesseract"
            choco install tesseract -y
            $chocoPath = "C:\Program Files\Tesseract-OCR"
            if (-not (Test-Path $chocoPath)) { $chocoPath = "C:\Program Files (x86)\Tesseract-OCR" }
            if (-not (Test-Path $chocoPath)) { Write-Error "Tesseract not found after Chocolatey install"; exit 1 }
            Copy-Item -Path (Join-Path $chocoPath '*') -Destination $destDir -Recurse
          }

          # Verify
          $tesseractExe = Join-Path $destDir "tesseract.exe"
          if (Test-Path $tesseractExe) {
            Write-Host "Tesseract prepared successfully"
            & $tesseractExe --version
          } else {
            Write-Error "Failed to prepare Tesseract"
            exit 1
          }

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 4. Ğ¡ĞšĞĞ§Ğ˜Ğ’ĞĞĞ˜Ğ• POPPLER (PORTABLE)
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Download Poppler Portable
        shell: powershell
        run: |
          Write-Host "Downloading Poppler ${{ env.POPPLER_VERSION }}..."

          # Use oschwartz10612 Windows builds
          $url = "https://github.com/oschwartz10612/poppler-windows/releases/download/v${{ env.POPPLER_VERSION }}-0/Release-${{ env.POPPLER_VERSION }}-0.zip"
          $zip = "poppler.zip"

          Invoke-WebRequest -Uri $url -OutFile $zip

          # Extract
          $extractDir = Join-Path $PWD "poppler-temp"
          Expand-Archive -Path $zip -DestinationPath $extractDir -Force

          # Copy only the Library (binaries)
          $destPoppler = Join-Path $PWD "portable\poppler"
          New-Item -ItemType Directory -Force -Path $destPoppler | Out-Null
          $libraryPath = Join-Path $extractDir ("poppler-${{ env.POPPLER_VERSION }}\Library")
          Copy-Item -Path (Join-Path $libraryPath '*') -Destination $destPoppler -Recurse

          # Verify
          $pdftoppmExe = Join-Path $destPoppler "bin\pdftoppm.exe"
          if (Test-Path $pdftoppmExe) {
            Write-Host "Poppler downloaded successfully"
            & $pdftoppmExe -v
          } else {
            Write-Error "Failed to download Poppler"
            exit 1
          }

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 5. Ğ¡Ğ‘ĞĞ ĞšĞ EXE Ğ¤ĞĞ™Ğ›ĞĞ’
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Build Server EXE
        shell: powershell
        run: |
          Write-Host 'Building tmc_server.exe...'

          pyinstaller `
            --onefile `
            --name 'tmc_server' `
            --add-data 'common;common' `
            --hidden-import 'peewee' `
            --hidden-import 'uvicorn.logging' `
            --hidden-import 'uvicorn.loops' `
            --hidden-import 'uvicorn.loops.auto' `
            --hidden-import 'uvicorn.protocols' `
            --hidden-import 'uvicorn.protocols.http' `
            --hidden-import 'uvicorn.protocols.http.auto' `
            --hidden-import 'uvicorn.protocols.websockets' `
            --hidden-import 'uvicorn.protocols.websockets.auto' `
            --hidden-import 'uvicorn.lifespan' `
            --hidden-import 'uvicorn.lifespan.on' `
            --console `
            server/src/main_server.py

          $serverExe = Join-Path 'dist' 'tmc_server.exe'
          if (Test-Path $serverExe) {
            Write-Host 'Server EXE built successfully'
          } else {
            Write-Error 'Failed to build server EXE'
            exit 1
          }

      - name: Build Client EXE
        shell: powershell
        run: |
          Write-Host 'Building tmc_client.exe...'

          pyinstaller `
            --onefile `
            --windowed `
            --name 'tmc_client' `
            --add-data 'common;common' `
            --hidden-import 'PySide6.QtCore' `
            --hidden-import 'PySide6.QtGui' `
            --hidden-import 'PySide6.QtWidgets' `
            --hidden-import 'cv2' `
            --hidden-import 'pytesseract' `
            --hidden-import 'pdf2image' `
            client/src/main_client.py

          $clientExe = Join-Path 'dist' 'tmc_client.exe'
          if (Test-Path $clientExe) {
            Write-Host 'Client EXE built successfully'
          } else {
            Write-Error 'Failed to build client EXE'
            exit 1
          }

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 6. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• PORTABLE ĞŸĞĞšĞ•Ğ¢Ğ
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Create Portable Package
        shell: powershell
        run: |
          $packageDir = "dist\TMC_Warehouse_Portable"
          
          Write-Host "Creating portable package structure..."
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ
          New-Item -ItemType Directory -Force -Path $packageDir
          
          # ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ EXE
          Copy-Item "dist\tmc_server.exe" $packageDir
          Copy-Item "dist\tmc_client.exe" $packageDir
          
          # ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Tesseract Ğ¸ Poppler
          Copy-Item -Path "portable\Tesseract-OCR" -Destination "$packageDir\Tesseract-OCR" -Recurse
          Copy-Item -Path "portable\poppler" -Destination "$packageDir\poppler" -Recurse
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ config Ñ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ¿ÑƒÑ‚ÑĞ¼Ğ¸
          New-Item -ItemType Directory -Force -Path "$packageDir\config"
          
          $configJson = @{
            app = @{
              name = "TMC Warehouse"
              version = "${{ steps.version.outputs.VERSION }}"
              language = "ru"
            }
            paths = @{
              database = "data/database/warehouse.db"
              receipts_root = "data/receipts"
              logs = "data/logs"
            }
            tesseract = @{
              path = "./Tesseract-OCR/tesseract.exe"
              languages = @("rus")
              psm = 6
            }
            poppler = @{
              path = "./poppler/bin"
            }
            camera = @{
              default_index = 0
              resolution = @(1280, 720)
              fps = 30
              codec = "MJPG"
              container = "avi"
            }
            server = @{
              host = "127.0.0.1"
              port = 8000
              base_url = "http://127.0.0.1:8000/api/v1"
              timeout = 30
            }
            sync = @{
              retry_count = 3
              retry_delay = 5
            }
            validation = @{
              control_types = @{
                weight_check = @{
                  description = "Weight check"
                  params = @("target_weight", "tolerance")
                }
                visual_check = @{
                  description = "Visual inspection"
                  params = @("checklist")
                }
                dimension_check = @{
                  description = "Dimension check"
                  params = @("length", "width", "height", "tolerance")
                }
                quantity_check = @{
                  description = "Quantity recount"
                  params = @("expected_count")
                }
              }
            }
          }
          $configJson | ConvertTo-Json -Depth 10 | Out-File -FilePath "$packageDir\config\config.json" -Encoding UTF8
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
          New-Item -ItemType Directory -Force -Path "$packageDir\data\database"
          New-Item -ItemType Directory -Force -Path "$packageDir\data\receipts"
          New-Item -ItemType Directory -Force -Path "$packageDir\data\logs"
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ñ‹Ğµ BAT Ñ„Ğ°Ğ¹Ğ»Ñ‹
          Set-Content -Path "$packageDir\START_SERVER.bat" -Encoding ASCII -Value @(
            "@echo off",
            "echo Starting TMC Warehouse Server...",
            "echo.",
            "echo Server URL: http://127.0.0.1:8000",
            "echo Press Ctrl+C to stop",
            "echo.",
            "tmc_server.exe",
            "pause"
          )
          
          Set-Content -Path "$packageDir\START_CLIENT.bat" -Encoding ASCII -Value @(
            "@echo off",
            "echo Starting TMC Warehouse Client...",
            "echo.",
            "start tmc_client.exe"
          )
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ README
          Set-Content -Path "$packageDir\README.txt" -Encoding UTF8 -Value @(
            "===============================================================",
            "  TMC WAREHOUSE SYSTEM - PORTABLE VERSION v${{ steps.version.outputs.VERSION }}",
            "===============================================================",
            "",
            "QUICK START:",
            "",
            "  1. Double-click START_SERVER.bat (keep window open)",
            "  2. Double-click START_CLIENT.bat",
            "  3. Done!",
            "",
            "---------------------------------------------------------------",
            "",
            "FOLDER STRUCTURE:",
            "",
            "  TMC_Warehouse_Portable/",
            "  |-- tmc_server.exe       - Application server",
            "  |-- tmc_client.exe       - Client application",
            "  |-- START_SERVER.bat     - Start server",
            "  |-- START_CLIENT.bat     - Start client",
            "  |-- Tesseract-OCR/       - OCR engine (embedded)",
            "  |-- poppler/             - PDF converter (embedded)",
            "  |-- config/",
            "  |   +-- config.json      - Configuration",
            "  +-- data/                - Database and files",
            "",
            "---------------------------------------------------------------",
            "",
            "CONFIGURATION (optional):",
            "",
            "  Configuration: config/config.json",
            "  ",
            "  All paths are configured for portable use.",
            "  You can copy the entire folder to another computer.",
            "",
            "---------------------------------------------------------------",
            "",
            "SYSTEM REQUIREMENTS:",
            "",
            "  - Windows 10/11 (64-bit)",
            "  - 4 GB RAM (recommended 8 GB)",
            "  - 500 MB free space",
            "  - Webcam (optional)",
            "",
            "---------------------------------------------------------------",
            "",
            "LICENSES:",
            "",
            "  TMC Warehouse:  Proprietary",
            "  Tesseract OCR:  Apache License 2.0",
            "  Poppler:        GPL v2",
            "",
            "---------------------------------------------------------------",
            "",
            "TROUBLESHOOTING:",
            "",
            "  1. Server window closes immediately:",
            "     - Open START_SERVER.bat manually",
            "     - Check the error message",
            "  ",
            "  2. Client does not start:",
            "     - Make sure the server is running (window open)",
            "  ",
            "  3. Camera not working:",
            "     - Check camera access in Windows settings",
            "  ",
            "  4. OCR error:",
            "     - Check tesseract path in config.json",
            "",
            "---------------------------------------------------------------",
            "",
            "Built on: $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')",
            "Version:  ${{ steps.version.outputs.VERSION }}",
            "",
            "==============================================================="
          )
          
          Write-Host "Package structure created successfully"
          
          Write-Host ""
          Write-Host "Package ready:"
          $sizeBytes = (Get-ChildItem $packageDir -Recurse | Measure-Object -Property Length -Sum).Sum
          $sizeMB = [math]::Round(($sizeBytes / 1MB), 2)
          Write-Host "Total size: $sizeMB MB"

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 7. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• ĞĞ Ğ¥Ğ˜Ğ’Ğ
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Create ZIP Archive
        shell: powershell
        run: |
          $zipName = "TMC_Warehouse_Portable_v${{ steps.version.outputs.VERSION }}_Windows_x64.zip"
          Write-Host "Creating archive: $zipName"
          
          Compress-Archive `
            -Path "dist\TMC_Warehouse_Portable\*" `
            -DestinationPath "dist\$zipName" `
            -CompressionLevel Optimal
          
          if (Test-Path "dist\$zipName") {
            $size = (Get-Item "dist\$zipName").Length / 1MB
            $sizeFormatted = "{0:N2}" -f $size
            Write-Host "Archive created successfully: $sizeFormatted MB"
          } else {
            Write-Error "Failed to create archive"
            exit 1
          }

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 8. Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ ĞĞ Ğ¢Ğ•Ğ¤ĞĞšĞ¢ĞĞ’
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Upload Portable Package
        uses: actions/upload-artifact@v4
        with:
          name: TMC-Warehouse-Portable-${{ steps.version.outputs.VERSION }}
          path: dist/*.zip
          retention-days: 90

      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # 9. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• GITHUB RELEASE (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ‚ĞµĞ³Ğ¾Ğ²)
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - name: Create GitHub Release
        if: startsWith(github.ref, 'refs/tags/v')
        uses: softprops/action-gh-release@v1
        with:
          name: TMC Warehouse Portable v${{ steps.version.outputs.VERSION }}
          body: |
            ## ğŸ‰ TMC Warehouse System - Portable Edition
            
            ### ğŸ“¦ ĞŸĞ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ
            
            Ğ­Ñ‚Ğ¾Ñ‚ Ñ€ĞµĞ»Ğ¸Ğ· Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ **Ğ²ÑÑ‘ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾Ğµ** Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğµ:
            - âœ… tmc_server.exe
            - âœ… tmc_client.exe  
            - âœ… Tesseract OCR (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½)
            - âœ… Poppler (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½)
            - âœ… ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
            
            ### ğŸš€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
            
            1. Ğ¡ĞºĞ°Ñ‡Ğ°Ğ¹Ñ‚Ğµ `TMC_Warehouse_Portable_v${{ steps.version.outputs.VERSION }}_Windows_x64.zip`
            2. Ğ Ğ°ÑĞ¿Ğ°ĞºÑƒĞ¹Ñ‚Ğµ Ğ² Ğ»ÑĞ±ÑƒÑ Ğ¿Ğ°Ğ¿ĞºÑƒ
            3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ `START_SERVER.bat`
            4. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ `START_CLIENT.bat`
            5. **Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!** ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¾Ğº Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ.
            
            ### ğŸ’» Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
            
            - Windows 10/11 (64-bit)
            - 4 GB RAM
            - 500 MB ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑÑ‚Ğ°
            
            ### ğŸ“ ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ
            
            - Portable Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ°
            - ĞœĞ¾Ğ¶Ğ½Ğ¾ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ñ‹
            - Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ°: ~150-200 MB
            
            ---
            
            **Ğ’ĞµÑ€ÑĞ¸Ñ**: ${{ steps.version.outputs.VERSION }}  
            **Ğ”Ğ°Ñ‚Ğ° ÑĞ±Ğ¾Ñ€ĞºĞ¸**: ${{ github.event.head_commit.timestamp }}
          files: |
            dist/*.zip
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
