# üîß –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ TMC Warehouse

> **–î–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É, –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–µ–º–∞ –¢–ú–¶ –Ω–∞ —Å–∫–ª–∞–¥.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏–∑-–∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤)
3. [Portable –≤–µ—Ä—Å–∏—è (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)](#portable-–≤–µ—Ä—Å–∏—è)
4. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
5. [–ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞](#–∑–∞–ø—É—Å–∫-–∏-–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
6. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
7. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–û–°:** Windows 10/11 (64-bit) –∏–ª–∏ Linux (Ubuntu 20.04+)
- **CPU:** 2 —è–¥—Ä–∞, 2.0 GHz
- **RAM:** 4 GB
- **–î–∏—Å–∫:** 2 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ—Ç—å:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (–¥–ª—è —Å–≤—è–∑–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–û–°:** Windows 11 (64-bit) –∏–ª–∏ Linux (Ubuntu 22.04+)
- **CPU:** 4 —è–¥—Ä–∞, 3.0 GHz
- **RAM:** 8 GB
- **–î–∏—Å–∫:** 5 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (SSD)
- **–ö–∞–º–µ—Ä–∞:** USB –≤–µ–±-–∫–∞–º–µ—Ä–∞ (–¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Å –≤–∏–¥–µ–æ—Ñ–∏–∫—Å–∞—Ü–∏–µ–π)

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: Windows

#### 1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.12

1. –°–∫–∞—á–∞–π—Ç–µ Python 3.12 —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞: https://www.python.org/downloads/
2. **–í–ê–ñ–ù–û:** –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫—É **"Add Python to PATH"**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
   ```cmd
   python --version
   ```
   –î–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–µ—Ä—Å–∏—è 3.12.x

#### 1.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tesseract OCR

1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ Tesseract –¥–ª—è Windows:
   - https://github.com/UB-Mannheim/tesseract/wiki
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é (5.3.x)

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Tesseract –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
   ```
   C:\Program Files\Tesseract-OCR\
   ```

3. **–í–ê–ñ–ù–û:** –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫–∏:
   - ‚úÖ Russian (rus)
   - ‚úÖ English (eng)

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
   ```cmd
   "C:\Program Files\Tesseract-OCR\tesseract.exe" --version
   ```

#### 1.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poppler

1. –°–∫–∞—á–∞–π—Ç–µ Poppler –¥–ª—è Windows:
   - https://github.com/oschwartz10612/poppler-windows/releases
   - –°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é `Release-XX.XX.X-0.zip`

2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –≤:
   ```
   C:\poppler\
   ```

3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
   ```
   C:\poppler\
   ‚îú‚îÄ‚îÄ bin\
   ‚îÇ   ‚îú‚îÄ‚îÄ pdftoppm.exe
   ‚îÇ   ‚îú‚îÄ‚îÄ pdfinfo.exe
   ‚îÇ   ‚îî‚îÄ‚îÄ ...
   ‚îî‚îÄ‚îÄ ...
   ```

#### 1.4. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```cmd
git clone https://github.com/–≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/tmc_warehouse.git
cd tmc_warehouse
```

#### 1.5. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```cmd
python -m venv .venv
.venv\Scripts\activate
```

#### 1.6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```cmd
pip install --upgrade pip
pip install -r requirements.txt
```

#### 1.7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:

```cmd
copy config\config.json config\config.local.json
notepad config\config.local.json
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏:
```json
{
  "tesseract": {
    "path": "C:/Program Files/Tesseract-OCR/tesseract.exe"
  },
  "poppler": {
    "path": "C:/poppler/bin"
  }
}
```

#### 1.8. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```cmd
python seed_db.py
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite: `data/database/warehouse.db`
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Linux (Ubuntu/Debian)

#### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
sudo apt-get update
sudo apt-get install -y \
  python3.12 \
  python3.12-venv \
  python3-pip \
  tesseract-ocr \
  tesseract-ocr-rus \
  tesseract-ocr-eng \
  poppler-utils \
  git
```

#### 2.2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/–≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/tmc_warehouse.git
cd tmc_warehouse
```

#### 2.3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3.12 -m venv .venv
source .venv/bin/activate
```

#### 2.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

#### 2.5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
cp config/config_linux.json config/config.local.json
nano config/config.local.json
```

–î–ª—è Linux –ø—É—Ç–∏ –æ–±—ã—á–Ω–æ:
```json
{
  "tesseract": {
    "path": "/usr/bin/tesseract"
  },
  "poppler": {
    "path": "/usr/bin"
  }
}
```

#### 2.6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python seed_db.py
```

---

## üì¶ Portable –≤–µ—Ä—Å–∏—è

### –î–ª—è Windows (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

#### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–π —Å–±–æ—Ä–∫–∏

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–ª–∏–∑–æ–≤ GitHub:
   ```
   https://github.com/–≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/tmc_warehouse/releases
   ```

2. –°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é:
   ```
   TMC_Warehouse_Portable_vX.X.X_Windows_x64.zip
   ```

3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –≤ –ª—é–±—É—é –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   ```
   C:\TMC_Warehouse\
   ```

4. **–ì–æ—Ç–æ–≤–æ!** –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ portable –≤–µ—Ä—Å–∏–∏:

```
TMC_Warehouse_Portable/
‚îú‚îÄ‚îÄ tmc_server.exe           # –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ tmc_client.exe           # –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ START_SERVER.bat         # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ START_CLIENT.bat         # –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ Tesseract-OCR/           # OCR –¥–≤–∏–∂–æ–∫ (–≤—Å—Ç—Ä–æ–µ–Ω)
‚îú‚îÄ‚îÄ poppler/                 # PDF –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä (–≤—Å—Ç—Ä–æ–µ–Ω)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ data/                    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ database/
    ‚îú‚îÄ‚îÄ receipts/
    ‚îî‚îÄ‚îÄ logs/
```

#### –°–±–æ—Ä–∫–∞ portable –≤–µ—Ä—Å–∏–∏ –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å portable –≤–µ—Ä—Å–∏—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ:

```cmd
pip install pyinstaller==6.3.0

# –°–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
pyinstaller --onefile --name tmc_server ^
  --add-data "common;common" ^
  --hidden-import peewee ^
  --hidden-import uvicorn.logging ^
  --console ^
  server/src/main_server.py

# –°–±–æ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
pyinstaller --onefile --windowed --name tmc_client ^
  --add-data "common;common" ^
  --hidden-import PySide6.QtCore ^
  --hidden-import cv2 ^
  client/src/main_client.py
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `config/config.json` (–∏–ª–∏ `config/config.local.json`)

```json
{
  "app": {
    "name": "TMC Warehouse",
    "version": "1.0.0",
    "language": "ru"
  },
  "paths": {
    "database": "data/database/warehouse.db",
    "receipts_root": "data/receipts",
    "logs": "data/logs"
  },
  "tesseract": {
    "path": "C:/Program Files/Tesseract-OCR/tesseract.exe",
    "languages": ["rus"],
    "psm": 6
  },
  "poppler": {
    "path": "C:/poppler/bin"
  },
  "camera": {
    "default_index": 0,
    "resolution": [1280, 720],
    "fps": 30,
    "codec": "MJPG",
    "container": "avi"
  },
  "server": {
    "host": "127.0.0.1",
    "port": 8000,
    "base_url": "http://127.0.0.1:8000/api/v1",
    "timeout": 30
  },
  "sync": {
    "retry_count": 3,
    "retry_delay": 5
  }
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö:

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** (`config/config.json`):
```json
{
  "server": {
    "host": "0.0.0.0",
    "port": 8000
  }
}
```

**–ù–∞ –∫–ª–∏–µ–Ω—Ç–∞—Ö** (`config/config.json`):
```json
{
  "server": {
    "host": "192.168.1.100",
    "port": 8000,
    "base_url": "http://192.168.1.100:8000/api/v1"
  }
}
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 8000 –æ—Ç–∫—Ä—ã—Ç –≤ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–µ.

---

## üöÄ –ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

#### Windows:
```cmd
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –°–µ—Ä–≤–µ—Ä
.venv\Scripts\activate
python -m server.src.main_server

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ö–ª–∏–µ–Ω—Ç
.venv\Scripts\activate
python -m client.src.main_client
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
```cmd
run_server.bat
run_client.bat
```

#### Linux:
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –°–µ—Ä–≤–µ—Ä
./run_server.sh

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ö–ª–∏–µ–Ω—Ç
./run_client.sh
```

### Portable –≤–µ—Ä—Å–∏—è

–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ:
1. `START_SERVER.bat` (–æ—Å—Ç–∞–≤—å—Ç–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã–º)
2. `START_CLIENT.bat`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- **Health check:** http://127.0.0.1:8000/api/v1/health
- **Swagger UI:** http://127.0.0.1:8000/docs
- **ReDoc:** http://127.0.0.1:8000/redoc

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
```json
{
  "status": "ok",
  "time": "2025-12-02T10:30:00"
}
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- –ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –∫–ª–∏–µ–Ω—Ç–∞

#### Portable –≤–µ—Ä—Å–∏—è:
- –ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ `START_SERVER.bat`
- –ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –∫–ª–∏–µ–Ω—Ç–∞

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
git pull origin main
source .venv/bin/activate  # –∏–ª–∏ .venv\Scripts\activate –Ω–∞ Windows
pip install -r requirements.txt --upgrade
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ portable –≤–µ—Ä—Å–∏–∏

1. –°–∫–∞—á–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å GitHub Releases
2. **–í–ê–ñ–ù–û:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `data/` –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –≤ –Ω–æ–≤—É—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `config/config.json` –Ω–∞ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```
data/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ warehouse.db         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ receipts/                # –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ –≤–∏–¥–µ–æ –ø—Ä–∏—ë–º–æ–∫
‚îî‚îÄ‚îÄ logs/                    # –õ–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Windows (Task Scheduler):

–°–æ–∑–¥–∞–π—Ç–µ `backup.bat`:
```cmd
@echo off
set BACKUP_DIR=D:\Backups\TMC_Warehouse
set DATE=%date:~-4,4%%date:~-7,2%%date:~-10,2%
xcopy /E /I /Y C:\TMC_Warehouse\data "%BACKUP_DIR%\%DATE%"
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ –∑–∞–¥–∞—á Windows (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 23:00).

#### Linux (cron):

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ:
```
0 23 * * * tar -czf /backup/tmc_warehouse_$(date +\%Y\%m\%d).tar.gz /path/to/tmc_warehouse/data/
```

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û–∫–Ω–æ —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –û—à–∏–±–∫–∞ "Address already in use"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ —É–∂–µ —Å–µ—Ä–≤–µ—Ä:
   ```cmd
   netstat -ano | findstr :8000
   ```

2. –£–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `config/config.json`

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```
   data/logs/server.log
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
- –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏—ë–º–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä (–æ–∫–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ)

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ `config/config.json`:
   ```json
   {
     "server": {
       "base_url": "http://127.0.0.1:8000/api/v1"
     }
   }
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
   ```cmd
   curl http://127.0.0.1:8000/api/v1/health
   ```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä (Windows Firewall / iptables)

### –ü—Ä–æ–±–ª–µ–º–∞: OCR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ "Tesseract not found"
- –ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ Tesseract –≤ `config/config.json`:
   ```json
   {
     "tesseract": {
       "path": "C:/Program Files/Tesseract-OCR/tesseract.exe"
     }
   }
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
   ```cmd
   tesseract --version
   tesseract --list-langs
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —è–∑—ã–∫–∏ `rus` –∏ `eng`

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–º–µ—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–º–µ—Ä
- –í–∏–¥–µ–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

1. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∫–∞–º–µ—Ä—É (Skype, Zoom)

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ (Windows Settings ‚Üí Privacy ‚Üí Camera)

3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∏–Ω–¥–µ–∫—Å –∫–∞–º–µ—Ä—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (0, 1, 2...)

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ "database disk image is malformed"
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ë–î

**–†–µ—à–µ–Ω–∏–µ:**

1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:
   ```cmd
   copy D:\Backups\TMC_Warehouse\20251201\database\warehouse.db data\database\warehouse.db
   ```

2. –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î (‚ö†Ô∏è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö):
   ```cmd
   del data\database\warehouse.db
   python seed_db.py
   ```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
```
data/logs/
‚îú‚îÄ‚îÄ server.log       # –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ client.log       # –õ–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:

1. **–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:**
   ```cmd
   python -m server.src.main_server --version
   ```

2. **–õ–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—à–∏–±–∫–∏:**
   ```
   data/logs/server.log
   data/logs/client.log
   ```

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (–±–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö):
   ```
   config/config.json
   ```

4. **–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
   - –û–° –∏ –≤–µ—Ä—Å–∏—è
   - Python –≤–µ—Ä—Å–∏—è
   - Tesseract –≤–µ—Ä—Å–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **README.md** - –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- **USER_MANUAL.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **docs/API.md** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **docs/ARCHITECTURE.md** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **Swagger UI** - http://127.0.0.1:8000/docs

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-02
